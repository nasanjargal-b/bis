Ext.create('Ext.toolbar.Toolbar', {
    region: 'north',
    defaults: {
        hrefTarget: 'mainFrame'
    },
    border: false,

    items: [
        #drawMenu($mav.roles)
        #macro(drawMenu $roles)
            #set($viewer=false)
            #set($registerViewer=false)
            #foreach($role in $roles)
                #if($role=='ROLE_VIEWER')
                    #set($viewer = true)
                #end
            #end
            #foreach($role in $roles)
                #if($role=='ROLE_ADMINISTRATOR')
                    {
                        xtype:'splitbutton',
                        text:'Админ',
                        defaults: {
                            hrefTarget: 'mainFrame'
                        },
                        menu:[
                            {
                                text: 'Груп',
                                icon:'',
                                hrefTarget:'mainFrame',
                                href: 'group.jsp'
                            },
                            {
                                text: 'Хэрэглэгч',
                                hrefTarget:'mainFrame',
                                icon:'',
                                href: 'account.jsp'
                            }
                        ]
                    },
                #end
                #if($role=='ROLE_REPORTER')
                    {
                        xtype:'splitbutton',
                        text:'Тайлан',
                        defaults: {
                            hrefTarget: 'mainFrame'
                        },
                        menu:[
                            {
                                text: 'Тайлан',
                                hrefTarget:'mainFrame',
                                icon:'',
                                href: 'group.jsp'
                            },
                            {
                                text: 'Тайлан үүсгэх',
                                hrefTarget:'mainFrame',
                                icon:'',
                                href: 'group.jsp'
                            }

                        ]
                    },
                #end
                #if($role=='ROLE_REGISTER')
                    {
                        xtype:'splitbutton',
                        defaults: {
                            hrefTarget: 'mainFrame'
                        },
                        text:'Бүртгэл',
                        menu:[
                            {
                                text: 'Судалгаа',
                                hrefTarget:'mainFrame',
                                icon:'',
                                href: 'research.jsp'
                            },
                            {
                                text: 'Маягт',
                                hrefTarget:'mainFrame',
                                icon:'',
                                href: 'blank.jsp'
                            }
                        #if($viewer)
                            ,{
                            text: 'Бичлэг',
                            hrefTarget:'mainFrame',
                            icon:'',
                            href: 'record.jsp'
                        }
                        #end
                        ]
                    },
                #end
            #end
        #end,
        '->',
        {
            xtype:'splitbutton',
            text:'$mav.name',
            defaults: {
                hrefTarget: 'mainFrame'
            },
            menu:[
                {
                    text: 'Гарах',
                    icon: '/resources/images/cancel-window-16px.png',
                    handler: function () {
                        window.location = '/security/logout-process';
                    }
                },
                {
                    text:'Нууц үг солих',
                    icon: '/resources/images/password-16px.png',
                    action:'changePassword'
                }
            ]
        },
    ]
});